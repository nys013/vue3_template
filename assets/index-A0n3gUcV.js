import{H as x,d as O,n as d,L as B,q as X,B as D,r,M as Y,o as w,c as Z,e,w as t,g as y,k as v,j as ee,b as C,i as h,N as M,O as ae,E as u,K as te,_ as le}from"./index-BGHD8BrC.js";const oe=(n,p)=>x.get(`/admin/product/baseTrademark/${n}/${p}`),re=n=>n.id?x.put("/admin/product/baseTrademark/update",n):x.post("/admin/product/baseTrademark/save",n),se=n=>x.delete(`/admin/product/baseTrademark/remove/${n}`),ne={class:"btn-wrapper"},de={class:"image-slot"},ie={class:"image-slot"},ce={class:"dialog-footer"},ue=O({name:"TradeMark"}),pe=O({...ue,setup(n){const p=d(!1),T=d([]),i=d(1),m=d(3),N=d(0),_=async()=>{p.value=!0;const a=await oe(i.value,m.value);N.value=a.data.total,m.value=a.data.size,i.value=a.data.current,T.value=a.data.records||[],p.value=!1};B(m,()=>{i.value!==1?i.value=1:_()}),B(i,()=>{_()}),X(()=>{_()});const f=d(),s=D({tmName:"",logoUrl:""});let b=d("");const c=d(!1),$=()=>{f.value.resetFields(),f.value.clearValidate()},E=()=>{c.value=!0,b.value="添加"},j=a=>{c.value=!0,s.logoUrl=a.logoUrl,s.tmName=a.tmName,s.id=a.id,b.value="修改"},P=D({tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],logoUrl:[{required:!0,message:"请上传品牌图片",trigger:"blur"}]}),q=a=>{s.logoUrl=a.data,f.value.clearValidate("logoUrl")},A=a=>{if(["image/jpeg","image/png","image/jpg"].includes(a.type)){if(a.size/1024/1024>2)return u.error("上传图片大小不能超过2MB!"),!1}else return u.error("上传图片格式错误"),!1;return!0},L=async()=>{await f.value.validate();try{const a=await re(s);a.code===200?(u.success(b.value+"成功"),c.value=!1,_()):u.error(a.data)}catch{}},S=a=>{a.id&&te.confirm("确定删除该品牌?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{(await se(a.id)).code===200?(u.success("删除成功"),_()):u.error("删除失败")}catch{}})};return(a,o)=>{const g=r("el-button"),k=r("el-table-column"),U=r("el-icon"),V=r("el-image"),G=r("el-table"),I=r("el-pagination"),R=r("el-card"),H=r("el-input"),z=r("el-form-item"),K=r("el-upload"),F=r("el-form"),J=r("el-dialog"),Q=Y("loading");return w(),Z("div",null,[e(R,{class:"box-card"},{default:t(()=>[y("div",ne,[e(g,{size:"small",type:"primary",onClick:E},{default:t(()=>[v("+添加品牌")]),_:1})]),ee((w(),C(G,{data:T.value,border:"",style:{width:"100%"}},{default:t(()=>[e(k,{type:"index",label:"序号",width:"80"}),e(k,{prop:"tmName",label:"品牌名称",width:"180"}),e(k,{prop:"logo",label:"品牌LOGO"},{default:t(l=>[e(V,{src:l.row.logoUrl,style:{width:"80px",height:"80px"}},{error:t(()=>[y("div",de,[e(U,null,{default:t(()=>[e(h(M))]),_:1})])]),_:2},1032,["src"])]),_:1}),e(k,{fixed:"right",prop:"operation",label:"操作",width:"200"},{default:t(l=>[e(g,{size:"small",type:"warning",onClick:W=>j(l.row)},{default:t(()=>[v("编辑")]),_:2},1032,["onClick"]),e(g,{size:"small",type:"danger",onClick:W=>S(l.row)},{default:t(()=>[v("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,p.value]]),e(I,{class:"pagination-wrapper","current-page":i.value,"onUpdate:currentPage":o[0]||(o[0]=l=>i.value=l),"page-size":m.value,"onUpdate:pageSize":o[1]||(o[1]=l=>m.value=l),background:"",layout:"prev, pager, next, jumper, ->, sizes, total","page-sizes":[3,5,10,30],total:N.value},null,8,["current-page","page-size","total"])]),_:1}),e(J,{modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=l=>c.value=l),title:h(b)+"品牌",width:"50%","show-close":!1,onClose:$},{footer:t(()=>[y("span",ce,[e(g,{onClick:o[3]||(o[3]=l=>c.value=!1)},{default:t(()=>[v("关闭")]),_:1}),e(g,{type:"primary",onClick:L},{default:t(()=>[v(" 确认 ")]),_:1})])]),default:t(()=>[e(F,{ref_key:"formRef",ref:f,model:s,rules:P,"label-width":"100px","status-icon":"",class:"form-wrapper"},{default:t(()=>[e(z,{label:"品牌名称",prop:"tmName"},{default:t(()=>[e(H,{modelValue:s.tmName,"onUpdate:modelValue":o[2]||(o[2]=l=>s.tmName=l)},null,8,["modelValue"])]),_:1}),e(z,{label:"品牌LOGO",prop:"logoUrl"},{default:t(()=>[e(K,{class:"avatar-uploader",action:"api/admin/product/fileUpload","show-file-list":!1,"on-success":q,"before-upload":A},{default:t(()=>[s.logoUrl?(w(),C(V,{key:0,src:s.logoUrl,class:"avatar"},{error:t(()=>[y("div",ie,[e(U,null,{default:t(()=>[e(h(M))]),_:1})])]),_:1},8,["src"])):(w(),C(U,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[e(h(ae))]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),_e=le(pe,[["__scopeId","data-v-008f2eb5"]]);export{_e as default};
